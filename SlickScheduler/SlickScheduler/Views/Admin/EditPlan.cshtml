@model SlickScheduler.Models.Plan

@{
    ViewBag.Title = "EditPlan";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Edit This Plan</h2><a href="@Url.Action("ManagePlans")" class="btn btn-default">Back</a>
<table class="table table-bordered table-hover">
    <thead>
        <tr>
            <td colspan="4" class="text-center">
                <strong>@Model.Name</strong>  (@Html.ActionLink("Edit Info", "EditPlanInfo", "Admin", new { planId = Model.PlanId }, new { @class = "text-center"}))
                
            </td>
        </tr>
    </thead>
    @{ var year = Model.CatalogYear;
        var orderedSem = Model.Semesters.OrderBy(s => s.SemesterNum);}
    @foreach (var s in orderedSem)
    {
        string semName;
        if (s.SemesterNum % 2 != 0)
        {
            semName = "Fall";
        }
        else
        {
            year++;
            semName = "Spring";
        }
        <thead>
            <tr>
                <td colspan="4" class="active text-center">
                    <strong>@semName @year</strong>
                </td>
            </tr>
        </thead>
        <tr>
            <td class="active">Name</td>
            <td class="active">Course</td>
            <td class="active">Credit</td>
            <td class="active">Remove Course</td>
        </tr>
        foreach(var c in s.Courses)
        {
            <tr>
                <td>@c.Name</td>
                <td>@c.Subject @c.Number</td>
                <td>@c.CreditHours</td>
                <td>@using (Html.BeginForm("RemoveCourseFromSem", "Admin", FormMethod.Post))
                    {
                        <input type="hidden" name="courseId" value="@c.CourseId" />
                        <input type="hidden" name="planId" value="@Model.PlanId" />
                        <input type="hidden" name="semesterId" value="@s.SemesterId" />
                        <button type="submit" class="glyphicon glyphicon-minus-sign btn-link"></button>
                }</td>
            </tr>
        }
        <tr>
            <td colspan="4">
                <a href=@Url.Action("AddCourseToSem", "Admin", new { semesterId = s.SemesterId, planId = Model.PlanId }) class="btn btn-default btn-block">Add A Course</a>
            </td>
        </tr>
    }
</table>


