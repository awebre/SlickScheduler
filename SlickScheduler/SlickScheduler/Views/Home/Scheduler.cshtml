@model List<SlickScheduler.Models.User>
@{
    ViewBag.Title = "Scheduler";
}

@{
    if (Request.IsAuthenticated)
    {
    <h2>Scheduler</h2>
        //loads current user from controller
        var currentUser = ViewBag.CurrentUser;
        //Checks if user is student
        if (currentUser.Student != null)
        {
            //loads student information for display from HomeController
            var plan = currentUser.Student.Plan;
            var semesters = plan.Semesters;
            var _courses = ViewBag.AllCourses;
            var _cmps = ViewBag.CMPS;
            var _english = ViewBag.English;
            var _science = ViewBag.Science;
            var _math = ViewBag.Math;
            var _elect = ViewBag.Electives;
            var totalHours = 0;
            <body>
                @*Beginning of the curriculum sheet*@
                <table class="table table-bordered table-condensed">
                    <thead>
                        <tr>
                            <th><center>Curriculum Sheet - @plan.Name</center></th>
                        </tr>
                    </thead>
                </table>
                @*Creates navigational tabs*@
                <ul class="nav nav-tabs">
                    <li class="active"><a href="#CMPS" data-toggle="tab" aria-expanded="true">Computer Science</a></li>
                    <li class=""><a href="#ENGL" data-toggle="tab" aria-expanded="true">English</a></li>
                    <li class=""><a href="#SCIENCE" data-toggle="tab" aria-expanded="true">Science</a></li>
                    <li class=""><a href="#MATH" data-toggle="tab" aria-expanded="true">Math</a></li>
                    <li class=""><a href="#ELECT" data-toggle="tab" aria-expanded="true">Electives</a></li>
                </ul>
                @*Computer Science Tab*@
                <div id="tabContent" class="tab-content">
                    <div id="CMPS" class="tab-pane fade active in">
                        <table class="table table-bordered table-hover">
                            <tr>
                                <th width="20%">Course</th>
                                <th width="5%">Credits</th>
                            </tr>
                            @*For each computer science course...*@
                            @foreach (var c in _cmps)
                            {
                                //Tally the number of credit hours
                                totalHours += c.CreditHours;
                                //And create a column displaing the course information and credit hours
                                <tr class="active">
                                    <td><strong>@c.Subject @c.Number</strong> @c.Name</td>
                                    <td>@c.CreditHours</td>
                                </tr>
                            }
                            @*Display total credit hours*@
                            <tr class="success">
                                <td><strong>Total Hours</strong></td>
                                <td>@totalHours</td>
                            </tr>
                        </table>
                    </div>

                    @*Set total credit hours to 0 before moving to next tab*@


                    @{
                        totalHours = 0;
                    }
                    <div id="ENGL" class="tab-pane fade">
                        <table class="table table-bordered table-hover">
                            <tr>
                                <th width="20%">Course</th>
                                <th width="5%">Credits</th>
                            </tr>
                            @foreach (var c in _english)
                            {
                                totalHours += c.CreditHours;
                                <tr class="active">
                                    <td><strong>@c.Subject @c.Number</strong> @c.Name</td>
                                    <td>@c.CreditHours</td>
                                </tr>
                            }
                            <tr class="success">
                                <td><strong>Total Hours</strong></td>
                                <td>@totalHours</td>
                            </tr>
                        </table>
                    </div>

                    @*Same thing for Science*@

                    @{
                        totalHours = 0;
                    }
                    <div id="SCIENCE" class="tab-pane fade">
                        <table class="table table-bordered table-hover">
                            <tr>
                                <th width="20%">Course</th>
                                <th width="5%">Credits</th>
                            </tr>
                            @foreach (var c in _science)
                            {
                                totalHours += c.CreditHours;
                                <tr class="active">
                                    <td><strong>@c.Subject @c.Number</strong> @c.Name</td>
                                    <td>@c.CreditHours</td>
                                </tr>
                            }
                            <tr class="success">
                                <td><strong>Total Hours</strong></td>
                                <td>@totalHours</td>
                            </tr>
                        </table>
                    </div>


                    @{
                        totalHours = 0;
                    }
                    <div id="MATH" class="tab-pane fade">
                        <table class="table table-bordered table-hover">
                            <tr>
                                <th width="20%">Course</th>
                                <th width="5%">Credits</th>
                            </tr>
                            @foreach (var c in _math)
                    {
                        totalHours += c.CreditHours;
                                <tr class="active">
                                    <td><strong>@c.Subject @c.Number</strong> @c.Name</td>
                                    <td>@c.CreditHours</td>
                                </tr>
                            }
                            <tr class="success">
                                <td><strong>Total Hours</strong></td>
                                <td>@totalHours</td>
                            </tr>
                        </table>
                    </div>

                    @{
                        totalHours = 0;
                    }
                    <div id="ELECT" class="tab-pane fade">
                        <table class="table table-bordered table-hover">
                            <tr>
                                <th width="20%">Course</th>
                                <th width="5%">Credits</th>
                            </tr>
                            @foreach (var c in _elect)
                    {
                        totalHours += c.CreditHours;
                                <tr class="active">
                                    <td><strong>@c.Subject @c.Number</strong> @c.Name</td>
                                    <td>@c.CreditHours</td>
                                </tr>
                            }
                            <tr class="success">
                                <td><strong>Total Hours</strong></td>
                                <td>@totalHours</td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="row">
                    <table class="table table-bordered table-hover">
                        <thead>
                            <tr>
                                <th><center>4 Year Plan - @plan.Name</center></th>
                            </tr>
                        </thead>
                    </table>

                    <ul class="nav nav-tabs">
                        @{ var year = plan.CatalogYear; }
                        <li class="active"><a href="#SEM1" data-toggle="tab" aria-expanded="true">Fall @year</a></li>
                        @{ year += 1; }
                        <li class=""><a href="#SEM2" data-toggle="tab" aria-expanded="true">Spring @year</a></li>
                        <li class=""><a href="#SEM3" data-toggle="tab" aria-expanded="true">Fall 2014</a></li>
                        <li class=""><a href="#SEM4" data-toggle="tab" aria-expanded="true">Spring 2015</a></li>
                        <li class=""><a href="#SEM5" data-toggle="tab" aria-expanded="true">Fall 2015</a></li>
                        <li class=""><a href="#SEM6" data-toggle="tab" aria-expanded="true">Spring 2016</a></li>
                        <li class=""><a href="#SEM7" data-toggle="tab" aria-expanded="true">Fall 2016</a></li>
                        <li class=""><a href="#SEM8" data-toggle="tab" aria-expanded="true">Spring 2017</a></li>
                    </ul>
                    <div id="tabcontent" class="tab-content">

                    @foreach (var s in semesters)
                    {
                        var id = ("SEM" + s.SemesterNum);
                        string active;
                        if(id == "SEM1")
                        {
                            active = "active";
                        } else
                        {
                            active = "";
                        }
                        totalHours = 0;
                    <div id="@id" class="tab-pane fade @active in">
                        <table class="table table-bordered table-hover">
                            <tr>
                                <th width="20%">Course</th>
                                <th width="5%">Credits</th>
                            </tr>
                            @foreach (var c in s.Courses)
                            {
                                totalHours += c.CreditHours;
                            <tr class="active">
                                <td><strong>@c.Subject @c.Number</strong> @c.Name</td>
                                <td>@c.CreditHours</td>
                            </tr>
                            }

                            <tr class="success">
                                <td><strong>Total Hours</strong></td>
                                <td>@totalHours</td>
                            </tr>

                        </table>
                    </div>
                    }
                    </div>
            </div>




            </body>
                            }
                            else if (currentUser.Advisor != null)
                            {
                                //Show advisor information
                            }
                        }
                        else
                        {
                            Response.Redirect(Url.Action("Error401", "Error"));
                        }
}